<head><link rel="stylesheet" href="style-min.css"></head><head><link rel="stylesheet" href="style-min.css"></head><h1>C# - Generics</h1>

<p><strong>Generics</strong> allow you to delay the specification of the data type of programming elements in a class or a method, until it is actually used in the program. In other words, generics allow you to write a class or method that can work with any data type.</p>
<p>You write the specifications for the class or the method, with substitute parameters for data types. When the compiler encounters a constructor for the class or a function call for the method, it generates code to handle the specific data type. A simple example would help understanding the concept:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">using</span> <span class="typ">System</span><span class="pun">;</span>
<span class="kwd">using</span> <span class="typ">System</span><span class="pun">.</span><span class="typ">Collections</span><span class="pun">.</span><span class="typ">Generic</span><span class="pun">;</span>

<span class="kwd">namespace</span> <span class="typ">GenericApplication</span>
<span class="pun">{</span>
   <span class="kwd">public</span> <span class="kwd">class</span> <span class="typ">MyGenericArray</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span>
   <span class="pun">{</span>
      <span class="kwd">private</span><span class="pln"> T</span><span class="pun">[]</span><span class="pln"> array</span><span class="pun">;</span>
      <span class="kwd">public</span> <span class="typ">MyGenericArray</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> size</span><span class="pun">)</span>
      <span class="pun">{</span><span class="pln">
         array </span><span class="pun">=</span> <span class="kwd">new</span><span class="pln"> T</span><span class="pun">[</span><span class="pln">size </span><span class="pun">+</span> <span class="lit">1</span><span class="pun">];</span>
      <span class="pun">}</span>
      
      <span class="kwd">public</span><span class="pln"> T getItem</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> index</span><span class="pun">)</span>
      <span class="pun">{</span>
         <span class="kwd">return</span><span class="pln"> array</span><span class="pun">[</span><span class="pln">index</span><span class="pun">];</span>
      <span class="pun">}</span>
      
      <span class="kwd">public</span> <span class="kwd">void</span><span class="pln"> setItem</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> index</span><span class="pun">,</span><span class="pln"> T value</span><span class="pun">)</span>
      <span class="pun">{</span><span class="pln">
         array</span><span class="pun">[</span><span class="pln">index</span><span class="pun">]</span> <span class="pun">=</span><span class="pln"> value</span><span class="pun">;</span>
      <span class="pun">}</span>
   <span class="pun">}</span>
   
   <span class="kwd">class</span> <span class="typ">Tester</span>
   <span class="pun">{</span>
      <span class="kwd">static</span> <span class="kwd">void</span> <span class="typ">Main</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span>
      <span class="pun">{</span>
         
         <span class="com">//declaring an int array</span>
         <span class="typ">MyGenericArray</span><span class="str">&lt;int&gt;</span><span class="pln"> intArray </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">MyGenericArray</span><span class="str">&lt;int&gt;</span><span class="pun">(</span><span class="lit">5</span><span class="pun">);</span>
         
         <span class="com">//setting values</span>
         <span class="kwd">for</span> <span class="pun">(</span><span class="kwd">int</span><span class="pln"> c </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span> <span class="lit">5</span><span class="pun">;</span><span class="pln"> c</span><span class="pun">++)</span>
         <span class="pun">{</span><span class="pln">
            intArray</span><span class="pun">.</span><span class="pln">setItem</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">*</span><span class="lit">5</span><span class="pun">);</span>
         <span class="pun">}</span>
         
         <span class="com">//retrieving the values</span>
         <span class="kwd">for</span> <span class="pun">(</span><span class="kwd">int</span><span class="pln"> c </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span> <span class="lit">5</span><span class="pun">;</span><span class="pln"> c</span><span class="pun">++)</span>
         <span class="pun">{</span>
            <span class="typ">Console</span><span class="pun">.</span><span class="typ">Write</span><span class="pun">(</span><span class="pln">intArray</span><span class="pun">.</span><span class="pln">getItem</span><span class="pun">(</span><span class="pln">c</span><span class="pun">)</span> <span class="pun">+</span> <span class="str">" "</span><span class="pun">);</span>
         <span class="pun">}</span>
         
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">();</span>
         
         <span class="com">//declaring a character array</span>
         <span class="typ">MyGenericArray</span><span class="str">&lt;char&gt;</span><span class="pln"> charArray </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">MyGenericArray</span><span class="str">&lt;char&gt;</span><span class="pun">(</span><span class="lit">5</span><span class="pun">);</span>
         
         <span class="com">//setting values</span>
         <span class="kwd">for</span> <span class="pun">(</span><span class="kwd">int</span><span class="pln"> c </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span> <span class="lit">5</span><span class="pun">;</span><span class="pln"> c</span><span class="pun">++)</span>
         <span class="pun">{</span><span class="pln">
            charArray</span><span class="pun">.</span><span class="pln">setItem</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span> <span class="pun">(</span><span class="kwd">char</span><span class="pun">)(</span><span class="pln">c</span><span class="pun">+</span><span class="lit">97</span><span class="pun">));</span>
         <span class="pun">}</span>
         
         <span class="com">//retrieving the values</span>
         <span class="kwd">for</span> <span class="pun">(</span><span class="kwd">int</span><span class="pln"> c </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">;</span><span class="pln"> c</span><span class="pun">&lt;</span> <span class="lit">5</span><span class="pun">;</span><span class="pln"> c</span><span class="pun">++)</span>
         <span class="pun">{</span>
            <span class="typ">Console</span><span class="pun">.</span><span class="typ">Write</span><span class="pun">(</span><span class="pln">charArray</span><span class="pun">.</span><span class="pln">getItem</span><span class="pun">(</span><span class="pln">c</span><span class="pun">)</span> <span class="pun">+</span> <span class="str">" "</span><span class="pun">);</span>
         <span class="pun">}</span>
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">();</span>
         
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">ReadKey</span><span class="pun">();</span>
      <span class="pun">}</span>
   <span class="pun">}</span>
<span class="pun">}</span></pre>
<p>When the above code is compiled and executed, it produces the following result:</p>
<pre class="result notranslate">0 5 10 15 20
a b c d e
</pre>
<h2>Features of Generics</h2>
<p>Generics is a technique that enriches your programs in the following ways:</p>
<ul class="list">
<li>
<p>It helps you to maximize code reuse, type safety, and performance.</p>
</li>
<li>
<p>You can create generic collection classes. The .NET Framework class library contains several new generic collection classes in the <em>System.Collections.Generic</em> namespace. You may use these generic collection classes instead of the collection classes in the <em>System.Collections</em> namespace.</p>
</li>
<li>
<p>You can create your own generic interfaces, classes, methods, events, and delegates.</p>
</li>
<li>
<p>You may create generic classes constrained to enable access to methods on particular data types.</p>
</li>
<li>
<p>You may get information on the types used in a generic data type at run-time by means of reflection.</p>
</li>
</ul>
<h2>Generic Methods</h2>
<p>In the previous example, we have used a generic class; we can declare a generic method with a type parameter. The following program illustrates the concept:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">using</span> <span class="typ">System</span><span class="pun">;</span>
<span class="kwd">using</span> <span class="typ">System</span><span class="pun">.</span><span class="typ">Collections</span><span class="pun">.</span><span class="typ">Generic</span><span class="pun">;</span>

<span class="kwd">namespace</span> <span class="typ">GenericMethodAppl</span>
<span class="pun">{</span>
   <span class="kwd">class</span> <span class="typ">Program</span>
   <span class="pun">{</span>
      <span class="kwd">static</span> <span class="kwd">void</span> <span class="typ">Swap</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;(</span><span class="kwd">ref</span><span class="pln"> T lhs</span><span class="pun">,</span> <span class="kwd">ref</span><span class="pln"> T rhs</span><span class="pun">)</span>
      <span class="pun">{</span><span class="pln">
         T temp</span><span class="pun">;</span><span class="pln">
         temp </span><span class="pun">=</span><span class="pln"> lhs</span><span class="pun">;</span><span class="pln">
         lhs </span><span class="pun">=</span><span class="pln"> rhs</span><span class="pun">;</span><span class="pln">
         rhs </span><span class="pun">=</span><span class="pln"> temp</span><span class="pun">;</span>
      <span class="pun">}</span>
      <span class="kwd">static</span> <span class="kwd">void</span> <span class="typ">Main</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span>
      <span class="pun">{</span>
         <span class="kwd">int</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">;</span>
         <span class="kwd">char</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> d</span><span class="pun">;</span><span class="pln">
         a </span><span class="pun">=</span> <span class="lit">10</span><span class="pun">;</span><span class="pln">
         b </span><span class="pun">=</span> <span class="lit">20</span><span class="pun">;</span><span class="pln">
         c </span><span class="pun">=</span> <span class="str">'I'</span><span class="pun">;</span><span class="pln">
         d </span><span class="pun">=</span> <span class="str">'V'</span><span class="pun">;</span>
         
         <span class="com">//display values before swap:</span>
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"Int values before calling swap:"</span><span class="pun">);</span>
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"a = {0}, b = {1}"</span><span class="pun">,</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">);</span>
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"Char values before calling swap:"</span><span class="pun">);</span>
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"c = {0}, d = {1}"</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> d</span><span class="pun">);</span>
         
         <span class="com">//call swap</span>
         <span class="typ">Swap</span><span class="str">&lt;int&gt;</span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> a</span><span class="pun">,</span> <span class="kwd">ref</span><span class="pln"> b</span><span class="pun">);</span>
         <span class="typ">Swap</span><span class="str">&lt;char&gt;</span><span class="pun">(</span><span class="kwd">ref</span><span class="pln"> c</span><span class="pun">,</span> <span class="kwd">ref</span><span class="pln"> d</span><span class="pun">);</span>
         
         <span class="com">//display values after swap:</span>
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"Int values after calling swap:"</span><span class="pun">);</span>
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"a = {0}, b = {1}"</span><span class="pun">,</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">);</span>
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"Char values after calling swap:"</span><span class="pun">);</span>
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"c = {0}, d = {1}"</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> d</span><span class="pun">);</span>
         
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">ReadKey</span><span class="pun">();</span>
      <span class="pun">}</span>
   <span class="pun">}</span>
<span class="pun">}</span></pre>
<p>When the above code is compiled and executed, it produces the following result:</p>
<pre class="result notranslate">Int values before calling swap:
a = 10, b = 20
Char values before calling swap:
c = I, d = V
Int values after calling swap:
a = 20, b = 10
Char values after calling swap:
c = V, d = I
</pre>
<h2>Generic Delegates</h2>
<p>You can define a generic delegate with type parameters. For example:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">delegate</span><span class="pln"> T </span><span class="typ">NumberChanger</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;(</span><span class="pln">T n</span><span class="pun">);</span></pre>
<p>The following example shows use of this delegate:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">using</span> <span class="typ">System</span><span class="pun">;</span>
<span class="kwd">using</span> <span class="typ">System</span><span class="pun">.</span><span class="typ">Collections</span><span class="pun">.</span><span class="typ">Generic</span><span class="pun">;</span>

<span class="kwd">delegate</span><span class="pln"> T </span><span class="typ">NumberChanger</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;(</span><span class="pln">T n</span><span class="pun">);</span>
<span class="kwd">namespace</span> <span class="typ">GenericDelegateAppl</span>
<span class="pun">{</span>
   <span class="kwd">class</span> <span class="typ">TestDelegate</span>
   <span class="pun">{</span>
      <span class="kwd">static</span> <span class="kwd">int</span><span class="pln"> num </span><span class="pun">=</span> <span class="lit">10</span><span class="pun">;</span>
      <span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">int</span> <span class="typ">AddNum</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> p</span><span class="pun">)</span>
      <span class="pun">{</span><span class="pln">
         num </span><span class="pun">+=</span><span class="pln"> p</span><span class="pun">;</span>
         <span class="kwd">return</span><span class="pln"> num</span><span class="pun">;</span>
      <span class="pun">}</span>
      
      <span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">int</span> <span class="typ">MultNum</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> q</span><span class="pun">)</span>
      <span class="pun">{</span><span class="pln">
         num </span><span class="pun">*=</span><span class="pln"> q</span><span class="pun">;</span>
         <span class="kwd">return</span><span class="pln"> num</span><span class="pun">;</span>
      <span class="pun">}</span>
      <span class="kwd">public</span> <span class="kwd">static</span> <span class="kwd">int</span><span class="pln"> getNum</span><span class="pun">()</span>
      <span class="pun">{</span>
         <span class="kwd">return</span><span class="pln"> num</span><span class="pun">;</span>
      <span class="pun">}</span>
      
      <span class="kwd">static</span> <span class="kwd">void</span> <span class="typ">Main</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span>
      <span class="pun">{</span>
         <span class="com">//create delegate instances</span>
         <span class="typ">NumberChanger</span><span class="str">&lt;int&gt;</span><span class="pln"> nc1 </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">NumberChanger</span><span class="str">&lt;int&gt;</span><span class="pun">(</span><span class="typ">AddNum</span><span class="pun">);</span>
         <span class="typ">NumberChanger</span><span class="str">&lt;int&gt;</span><span class="pln"> nc2 </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">NumberChanger</span><span class="str">&lt;int&gt;</span><span class="pun">(</span><span class="typ">MultNum</span><span class="pun">);</span>
         
         <span class="com">//calling the methods using the delegate objects</span><span class="pln">
         nc1</span><span class="pun">(</span><span class="lit">25</span><span class="pun">);</span>
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"Value of Num: {0}"</span><span class="pun">,</span><span class="pln"> getNum</span><span class="pun">());</span><span class="pln">
         nc2</span><span class="pun">(</span><span class="lit">5</span><span class="pun">);</span>
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"Value of Num: {0}"</span><span class="pun">,</span><span class="pln"> getNum</span><span class="pun">());</span>
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">ReadKey</span><span class="pun">();</span>
      <span class="pun">}</span>
   <span class="pun">}</span>
<span class="pun">}</span></pre>
<p>When the above code is compiled and executed, it produces the following result:</p>
<pre class="result notranslate">Value of Num: 35
Value of Num: 175
</pre>