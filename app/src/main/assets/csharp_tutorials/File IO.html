<head><link rel="stylesheet" href="style-min.css"></head><head><link rel="stylesheet" href="style-min.css"></head><h1>C# - File I/O</h1>
 
<p>A <strong>file</strong> is a collection of data stored in a disk with a specific name and a directory path. When a file is opened for reading or writing, it becomes a <strong>stream</strong>.</p>
<p>The stream is basically the sequence of bytes passing through the communication path. There are two main streams: the <strong>input stream</strong> and the <strong>output stream</strong>. The<strong> input stream</strong> is used for reading data from file (read operation) and the <strong>output stream</strong> is used for writing into the file (write operation).</p>
<h2>C# I/O Classes</h2>
<p>The System.IO namespace has various classes that are used for performing numerous operations with files, such as creating and deleting files, reading from or writing to a file, closing a file etc.</p>
<p>The following table shows some commonly used non-abstract classes in the System.IO namespace:</p>
<table class="table table-bordered">
<tbody>
<tr>
<th style="width: 25%;">I/O Class</th>
<th>Description</th>
</tr>
<tr>
<td>BinaryReader</td>
<td>Reads primitive data from a binary stream.</td>
</tr>
<tr>
<td>BinaryWriter</td>
<td>Writes primitive data in binary format.</td>
</tr>
<tr>
<td>BufferedStream</td>
<td>A temporary storage for a stream of bytes.</td>
</tr>
<tr>
<td>Directory</td>
<td>Helps in manipulating a directory structure.</td>
</tr>
<tr>
<td>DirectoryInfo</td>
<td>Used for performing operations on directories.</td>
</tr>
<tr>
<td>DriveInfo</td>
<td>Provides information for the drives.</td>
</tr>
<tr>
<td>File</td>
<td>Helps in manipulating files.</td>
</tr>
<tr>
<td>FileInfo</td>
<td>Used for performing operations on files.</td>
</tr>
<tr>
<td>FileStream</td>
<td>Used to read from and write to any location in a file.</td>
</tr>
<tr>
<td>MemoryStream</td>
<td>Used for random access to streamed data stored in memory.</td>
</tr>
<tr>
<td>Path</td>
<td>Performs operations on path information.</td>
</tr>
<tr>
<td>StreamReader</td>
<td>Used for reading characters from a byte stream.</td>
</tr>
<tr>
<td>StreamWriter</td>
<td>Is used for writing characters to a stream.</td>
</tr>
<tr>
<td>StringReader</td>
<td>Is used for reading from a string buffer.</td>
</tr>
<tr>
<td>StringWriter</td>
<td>Is used for writing into a string buffer.</td>
</tr>
</tbody>
</table>
<h2>The FileStream Class</h2>
<p>The <strong>FileStream</strong> class in the System.IO namespace helps in reading from, writing to and closing files. This class derives from the abstract class Stream.</p>
<p>You need to create a <strong>FileStream</strong> object to create a new file or open an existing file. The syntax for creating a <strong>FileStream</strong> object is as follows:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="typ">FileStream</span> <span class="str">&lt;object_name&gt;</span> <span class="pun">=</span> <span class="kwd">new</span> <span class="typ">FileStream</span><span class="pun">(</span> <span class="str">&lt;file_name&gt;</span><span class="pun">,</span> <span class="pun">&lt;</span><span class="typ">FileMode</span> <span class="typ">Enumerator</span><span class="pun">&gt;,</span> <span class="pun">&lt;</span><span class="typ">FileAccess</span> <span class="typ">Enumerator</span><span class="pun">&gt;,</span> <span class="pun">&lt;</span><span class="typ">FileShare</span> <span class="typ">Enumerator</span><span class="pun">&gt;);</span></pre>
<p>For example, we create a FileStream object <strong>F</strong> for reading a file named <strong>sample.txt as shown</strong>:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="typ">FileStream</span><span class="pln"> F </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">FileStream</span><span class="pun">(</span><span class="str">"sample.txt"</span><span class="pun">,</span> <span class="typ">FileMode</span><span class="pun">.</span><span class="typ">Open</span><span class="pun">,</span> <span class="typ">FileAccess</span><span class="pun">.</span><span class="typ">Read</span><span class="pun">,</span> <span class="typ">FileShare</span><span class="pun">.</span><span class="typ">Read</span><span class="pun">);</span></pre>
<table class="table table-bordered">
<tbody>
<tr>
<th style="width: 20%;">Parameter</th>
<th>Description</th>
</tr>
<tr>
<td>FileMode</td>
<td>
<p>The <strong>FileMode</strong> enumerator defines various methods for opening files. The members of the FileMode enumerator are:</p>
<ul class="list">
<li>
<p><strong>Append</strong>: It opens an existing file and puts cursor at the end of file, or creates the file, if the file does not exist.</p>
</li>
<li>
<p><strong>Create</strong>: It creates a new file.</p>
</li>
<li>
<p><strong>CreateNew</strong>: It specifies to the operating system, that it should create a new file.</p>
</li>
<li>
<p><strong>Open</strong>: It opens an existing file.</p>
</li>
<li>
<p><strong>OpenOrCreate</strong>: It specifies to the operating system that it should open a file if it exists, otherwise it should create a new file.</p>
</li>
<li>
<p><strong>Truncate</strong>: It opens an existing file and truncates its size to zero bytes.</p>
</li>
</ul>
</td>
</tr>
<tr>
<td>FileAccess</td>
<td>
<p><strong>FileAccess</strong> enumerators have members: <strong>Read</strong>, <strong>ReadWrite</strong> and <strong>Write</strong>.</p>
</td>
</tr>
<tr>
<td>FileShare</td>
<td>
<p><strong>FileShare</strong> enumerators have the following members:</p>
<ul class="list">
<li>
<p><strong>Inheritable</strong>: It allows a file handle to pass inheritance to the child processes</p>
</li>
<li>
<p><strong>None</strong>: It declines sharing of the current file</p>
</li>
<li>
<p><strong>Read</strong>: It allows opening the file for reading</p>
</li>
<li>
<p><strong>ReadWrite</strong>: It allows opening the file for reading and writing</p>
</li>
<li>
<p><strong>Write</strong>: It allows opening the file for writing</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<h2>Example</h2>
<p>The following program demonstrates use of the <strong>FileStream </strong>class:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">using</span> <span class="typ">System</span><span class="pun">;</span>
<span class="kwd">using</span> <span class="typ">System</span><span class="pun">.</span><span class="pln">IO</span><span class="pun">;</span>

<span class="kwd">namespace</span> <span class="typ">FileIOApplication</span>
<span class="pun">{</span>
   <span class="kwd">class</span> <span class="typ">Program</span>
   <span class="pun">{</span>
      <span class="kwd">static</span> <span class="kwd">void</span> <span class="typ">Main</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span>
      <span class="pun">{</span>
         <span class="typ">FileStream</span><span class="pln"> F </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">FileStream</span><span class="pun">(</span><span class="str">"test.dat"</span><span class="pun">,</span> <span class="typ">FileMode</span><span class="pun">.</span><span class="typ">OpenOrCreate</span><span class="pun">,</span> <span class="typ">FileAccess</span><span class="pun">.</span><span class="typ">ReadWrite</span><span class="pun">);</span>
         <span class="kwd">for</span> <span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span> <span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;=</span> <span class="lit">20</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span>
         <span class="pun">{</span><span class="pln">
            F</span><span class="pun">.</span><span class="typ">WriteByte</span><span class="pun">((</span><span class="kwd">byte</span><span class="pun">)</span><span class="pln">i</span><span class="pun">);</span>
         <span class="pun">}</span><span class="pln">
         
         F</span><span class="pun">.</span><span class="typ">Position</span> <span class="pun">=</span> <span class="lit">0</span><span class="pun">;</span>
         <span class="kwd">for</span> <span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;=</span> <span class="lit">20</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span>
         <span class="pun">{</span>
            <span class="typ">Console</span><span class="pun">.</span><span class="typ">Write</span><span class="pun">(</span><span class="pln">F</span><span class="pun">.</span><span class="typ">ReadByte</span><span class="pun">()</span> <span class="pun">+</span> <span class="str">" "</span><span class="pun">);</span>
         <span class="pun">}</span><span class="pln">
         F</span><span class="pun">.</span><span class="typ">Close</span><span class="pun">();</span>
         <span class="typ">Console</span><span class="pun">.</span><span class="typ">ReadKey</span><span class="pun">();</span>
      <span class="pun">}</span>
   <span class="pun">}</span>
<span class="pun">}</span></pre>
<p>When the above code is compiled and executed, it produces the following result:</p>
<pre class="result notranslate">1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 -1
</pre>
<h2>Advanced File Operations in C#</h2>
<p>The preceding example provides simple file operations in C#. However, to utilize the immense powers of C# System.IO classes, you need to know the commonly used properties and methods of these classes.</p>
<table class="table table-bordered">
<tbody>
<tr>
<th style="width: 30%;">Topic and Description</th>
</tr>
<tr>
<td>
<p>Reading from and Writing into Text files</a></p>
<p>It involves reading from and writing into text files. The <strong>StreamReader</strong> and <strong>StreamWriter</strong> class helps to accomplish it.</p>
</td>
</tr>
<tr>
<td>
<p>Reading from and Writing into Binary files</a></p>
<p>It involves reading from and writing into binary files. The <strong>BinaryReader</strong> and <strong>BinaryWriter</strong> class helps to accomplish this.</p>
</td>
</tr>
<tr>
<td>
<p>Manipulating the Windows file system</a></p>
<p>It gives a C# programamer the ability to browse and locate Windows files and directories.</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>